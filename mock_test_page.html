<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BUP Admission Test</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #fef8f0;
      color: #333;
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
      background-image: linear-gradient(to bottom, rgba(255, 165, 0, 0.05), rgba(255, 140, 0, 0.05));
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(255, 140, 0, 0.15);
      overflow: hidden;
      border: 1px solid #ffb347;
    }

    header {
      background: linear-gradient(to right, #ff8c00, #ff6a00);
      color: white;
      padding: 25px 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      letter-spacing: 1px;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
    }

    header p {
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 700px;
      margin: 0 auto;
    }

    .header-icon {
      position: absolute;
      font-size: 4rem;
      opacity: 0.2;
      top: 10px;
      right: 20px;
      transform: rotate(15deg);
    }

    .content {
      padding: 30px;
    }

    .section-title {
      color: #ff6a00;
      padding-bottom: 10px;
      margin-bottom: 20px;
      border-bottom: 2px dashed #ffb347;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-title i {
      color: #ff8c00;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #555;
      font-size: 1.05rem;
    }

    .form-group input {
      width: 100%;
      padding: 14px;
      border: 2px solid #ffcc99;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-group input:focus {
      outline: none;
      border-color: #ff8c00;
      box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.2);
    }

    .required::after {
      content: " *";
      color: #ff4500;
    }

    .error-message {
      color: #ff4500;
      font-size: 0.9rem;
      margin-top: 5px;
      display: none;
    }

    .btn {
      background: linear-gradient(to right, #ff8c00, #ff6a00);
      color: white;
      border: none;
      padding: 14px 28px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 4px 15px rgba(255, 140, 0, 0.3);
    }

    .btn:hover {
      background: linear-gradient(to right, #ff7b00, #ff5500);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 140, 0, 0.4);
    }

    .btn:active {
      transform: translateY(0);
    }

    #testForm {
      transition: all 0.5s ease;
    }

    #quiz {
      display: none;
    }

    .question-container {
      background-color: #fffaf3;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 30px;
      border-left: 5px solid #ff8c00;
      box-shadow: 0 5px 15px rgba(255, 140, 0, 0.1);
    }

    .question-number {
      display: inline-block;
      background-color: #ff8c00;
      color: white;
      width: 32px;
      height: 32px;
      text-align: center;
      line-height: 32px;
      border-radius: 50%;
      margin-right: 10px;
      font-weight: bold;
    }

    .question-text {
      font-weight: 600;
      font-size: 1.1rem;
      color: #333;
      margin-bottom: 20px;
    }

    .options-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    @media (max-width: 768px) {
      .options-container {
        grid-template-columns: 1fr;
      }
    }

    .option {
      background-color: white;
      border: 2px solid #ffcc99;
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .option:hover {
      border-color: #ff8c00;
      background-color: #fff5e6;
    }

    .option.selected {
      border-color: #ff8c00;
      background-color: #ffeed9;
    }

    .option input {
      margin: 0;
      width: 18px;
      height: 18px;
      accent-color: #ff8c00;
    }

    .option-label {
      font-weight: 500;
      color: #555;
    }

    .test-info {
      display: flex;
      justify-content: space-between;
      background-color: #fff5e6;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      border: 1px solid #ffcc99;
      flex-wrap: wrap;
      gap: 15px;
    }

    .info-item {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1rem;
    }

    .info-item i {
      color: #ff8c00;
      font-size: 1.2rem;
    }

    .timer {
      background-color: #ff8c00;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 1.3rem;
      text-align: center;
      margin-bottom: 25px;
    }

    .submit-section {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px dashed #ffcc99;
    }

    .result-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .result-card {
      background-color: white;
      border-radius: 15px;
      padding: 40px;
      max-width: 600px;
      width: 90%;
      box-shadow: 0 15px 40px rgba(255, 140, 0, 0.3);
      border-top: 8px solid #ff8c00;
      text-align: center;
    }

    .result-card h2 {
      color: #ff6a00;
      margin-bottom: 25px;
      font-size: 2.2rem;
    }

    .score-display {
      font-size: 3.5rem;
      font-weight: bold;
      color: #ff8c00;
      margin: 20px 0;
    }

    .result-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin: 25px 0;
    }

    .result-item {
      background-color: #fff5e6;
      padding: 15px;
      border-radius: 8px;
      text-align: left;
    }

    .result-label {
      font-weight: 600;
      color: #666;
      font-size: 0.9rem;
    }

    .result-value {
      font-weight: bold;
      color: #ff6a00;
      font-size: 1.4rem;
      margin-top: 5px;
    }

    .close-result {
      margin-top: 25px;
      padding: 12px 30px;
      background-color: #ff8c00;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .close-result:hover {
      background-color: #ff7b00;
    }

    footer {
      text-align: center;
      padding: 20px;
      color: #777;
      font-size: 0.9rem;
      border-top: 1px solid #ffcc99;
      margin-top: 30px;
    }

    .progress-bar {
      height: 8px;
      background-color: #ffcc99;
      border-radius: 4px;
      margin: 25px 0;
      overflow: hidden;
    }

    .progress {
      height: 100%;
      background-color: #ff8c00;
      width: 0%;
      transition: width 0.5s;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>BUP Admission Test</h1>
      <p>Bangladesh University of Professionals - Mock Test Platform</p>
      <i class="fas fa-university header-icon"></i>
    </header>

    <div class="content">
      <!-- Registration Form -->
      <form id="testForm">
        <h2 class="section-title"><i class="fas fa-user-circle"></i> Registration Information</h2>
        
        <div class="form-group">
          <label for="name" class="required">Full Name</label>
          <input type="text" id="name" placeholder="Enter your full name" required>
          <div class="error-message" id="nameError">Please enter your full name</div>
        </div>
        
        <div class="form-group">
          <label for="email" class="required">Email Address</label>
          <input type="email" id="email" placeholder="Enter your email address" required>
          <div class="error-message" id="emailError">Please enter a valid email address</div>
        </div>
        
        <div class="form-group">
          <label for="phone" class="required">Phone Number</label>
          <input type="text" id="phone" placeholder="Enter your phone number" required>
          <div class="error-message" id="phoneError">Please enter a valid phone number</div>
        </div>
        
        <div class="test-info">
          <div class="info-item">
            <i class="fas fa-clock"></i>
            <span>Test Duration: 30 minutes</span>
          </div>
          <div class="info-item">
            <i class="fas fa-question-circle"></i>
            <span>Total Questions: 10</span>
          </div>
          <div class="info-item">
            <i class="fas fa-check-circle"></i>
            <span>Marking: +1 for correct, -0.5 for wrong</span>
          </div>
          <div class="info-item">
            <i class="fas fa-book"></i>
            <span>Sections: English (3), GK (2), Aptitude (5)</span>
          </div>
        </div>
        
        <div style="text-align: center;">
          <button type="button" class="btn" onclick="validateAndStartTest()">
            <i class="fas fa-play-circle"></i> Start Test
          </button>
        </div>
      </form>

      <!-- Quiz Section -->
      <div id="quiz">
        <div class="timer">
          <i class="fas fa-hourglass-half"></i> Time Remaining: <span id="time">30:00</span>
        </div>
        
        <div class="progress-bar">
          <div class="progress" id="progressBar"></div>
        </div>
        
        <h2 class="section-title"><i class="fas fa-pencil-alt"></i> Test Questions</h2>
        
        <!-- English Questions -->
        <h3 class="section-title" style="font-size: 1.3rem;"><i class="fas fa-language"></i> English Section (3 Questions)</h3>
        
        <div class="question-container" id="q1">
          <div class="question-number">1</div>
          <div class="question-text">Choose the correct synonym for "Benevolent":</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q1', 'a')">
              <input type="radio" name="q1" value="a" id="q1a">
              <div class="option-label">A) Kind</div>
            </div>
            <div class="option" onclick="selectOption('q1', 'b')">
              <input type="radio" name="q1" value="b" id="q1b">
              <div class="option-label">B) Hostile</div>
            </div>
            <div class="option" onclick="selectOption('q1', 'c')">
              <input type="radio" name="q1" value="c" id="q1c">
              <div class="option-label">C) Greedy</div>
            </div>
            <div class="option" onclick="selectOption('q1', 'd')">
              <input type="radio" name="q1" value="d" id="q1d">
              <div class="option-label">D) Neutral</div>
            </div>
          </div>
        </div>
        
        <div class="question-container" id="q2">
          <div class="question-number">2</div>
          <div class="question-text">Which sentence is grammatically correct?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q2', 'a')">
              <input type="radio" name="q2" value="a" id="q2a">
              <div class="option-label">A) She don't like apples.</div>
            </div>
            <div class="option" onclick="selectOption('q2', 'b')">
              <input type="radio" name="q2" value="b" id="q2b">
              <div class="option-label">B) Neither of the boys are coming.</div>
            </div>
            <div class="option" onclick="selectOption('q2', 'c')">
              <input type="radio" name="q2" value="c" id="q2c">
              <div class="option-label">C) The team is playing well.</div>
            </div>
            <div class="option" onclick="selectOption('q2', 'd')">
              <input type="radio" name="q2" value="d" id="q2d">
              <div class="option-label">D) Each of the students were present.</div>
            </div>
          </div>
        </div>
        
        <div class="question-container" id="q3">
          <div class="question-number">3</div>
          <div class="question-text">Identify the correctly spelled word:</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q3', 'a')">
              <input type="radio" name="q3" value="a" id="q3a">
              <div class="option-label">A) Accommodate</div>
            </div>
            <div class="option" onclick="selectOption('q3', 'b')">
              <input type="radio" name="q3" value="b" id="q3b">
              <div class="option-label">B) Acommodate</div>
            </div>
            <div class="option" onclick="selectOption('q3', 'c')">
              <input type="radio" name="q3" value="c" id="q3c">
              <div class="option-label">C) Accomodate</div>
            </div>
            <div class="option" onclick="selectOption('q3', 'd')">
              <input type="radio" name="q3" value="d" id="q3d">
              <div class="option-label">D) Acomodate</div>
            </div>
          </div>
        </div>
        
        <!-- GK Questions -->
        <h3 class="section-title" style="font-size: 1.3rem;"><i class="fas fa-globe"></i> General Knowledge (2 Questions)</h3>
        
        <div class="question-container" id="q4">
          <div class="question-number">4</div>
          <div class="question-text">What is the capital city of Bangladesh?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q4', 'a')">
              <input type="radio" name="q4" value="a" id="q4a">
              <div class="option-label">A) Chittagong</div>
            </div>
            <div class="option" onclick="selectOption('q4', 'b')">
              <input type="radio" name="q4" value="b" id="q4b">
              <div class="option-label">B) Dhaka</div>
            </div>
            <div class="option" onclick="selectOption('q4', 'c')">
              <input type="radio" name="q4" value="c" id="q4c">
              <div class="option-label">C) Khulna</div>
            </div>
            <div class="option" onclick="selectOption('q4', 'd')">
              <input type="radio" name="q4" value="d" id="q4d">
              <div class="option-label">D) Sylhet</div>
            </div>
          </div>
        </div>
        
        <div class="question-container" id="q5">
          <div class="question-number">5</div>
          <div class="question-text">Who is known as the "Father of the Nation" in Bangladesh?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q5', 'a')">
              <input type="radio" name="q5" value="a" id="q5a">
              <div class="option-label">A) Sheikh Hasina</div>
            </div>
            <div class="option" onclick="selectOption('q5', 'b')">
              <input type="radio" name="q5" value="b" id="q5b">
              <div class="option-label">B) Ziaur Rahman</div>
            </div>
            <div class="option" onclick="selectOption('q5', 'c')">
              <input type="radio" name="q5" value="c" id="q5c">
              <div class="option-label">C) Bangabandhu Sheikh Mujibur Rahman</div>
            </div>
            <div class="option" onclick="selectOption('q5', 'd')">
              <input type="radio" name="q5" value="d" id="q5d">
              <div class="option-label">D) Hussain Muhammad Ershad</div>
            </div>
          </div>
        </div>
        
        <!-- Aptitude Questions -->
        <h3 class="section-title" style="font-size: 1.3rem;"><i class="fas fa-calculator"></i> Aptitude (5 Questions)</h3>
        
        <div class="question-container" id="q6">
          <div class="question-number">6</div>
          <div class="question-text">If a train travels at 60 km/h, how far will it travel in 2 hours and 30 minutes?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q6', 'a')">
              <input type="radio" name="q6" value="a" id="q6a">
              <div class="option-label">A) 120 km</div>
            </div>
            <div class="option" onclick="selectOption('q6', 'b')">
              <input type="radio" name="q6" value="b" id="q6b">
              <div class="option-label">B) 150 km</div>
            </div>
            <div class="option" onclick="selectOption('q6', 'c')">
              <input type="radio" name="q6" value="c" id="q6c">
              <div class="option-label">C) 180 km</div>
            </div>
            <div class="option" onclick="selectOption('q6', 'd')">
              <input type="radio" name="q6" value="d" id="q6d">
              <div class="option-label">D) 200 km</div>
            </div>
          </div>
        </div>
        
        <div class="question-container" id="q7">
          <div class="question-number">7</div>
          <div class="question-text">What is 25% of 200?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q7', 'a')">
              <input type="radio" name="q7" value="a" id="q7a">
              <div class="option-label">A) 25</div>
            </div>
            <div class="option" onclick="selectOption('q7', 'b')">
              <input type="radio" name="q7" value="b" id="q7b">
              <div class="option-label">B) 50</div>
            </div>
            <div class="option" onclick="selectOption('q7', 'c')">
              <input type="radio" name="q7" value="c" id="q7c">
              <div class="option-label">C) 75</div>
            </div>
            <div class="option" onclick="selectOption('q7', 'd')">
              <input type="radio" name="q7" value="d" id="q7d">
              <div class="option-label">D) 100</div>
            </div>
          </div>
        </div>
        
        <div class="question-container" id="q8">
          <div class="question-number">8</div>
          <div class="question-text">If 3x + 7 = 22, what is the value of x?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q8', 'a')">
              <input type="radio" name="q8" value="a" id="q8a">
              <div class="option-label">A) 3</div>
            </div>
            <div class="option" onclick="selectOption('q8', 'b')">
              <input type="radio" name="q8" value="b" id="q8b">
              <div class="option-label">B) 4</div>
            </div>
            <div class="option" onclick="selectOption('q8', 'c')">
              <input type="radio" name="q8" value="c" id="q8c">
              <div class="option-label">C) 5</div>
            </div>
            <div class="option" onclick="selectOption('q8', 'd')">
              <input type="radio" name="q8" value="d" id="q8d">
              <div class="option-label">D) 6</div>
            </div>
          </div>
        </div>
        
        <div class="question-container" id="q9">
          <div class="question-number">9</div>
          <div class="question-text">What is the next number in the sequence: 2, 6, 12, 20, 30, ?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q9', 'a')">
              <input type="radio" name="q9" value="a" id="q9a">
              <div class="option-label">A) 40</div>
            </div>
            <div class="option" onclick="selectOption('q9', 'b')">
              <input type="radio" name="q9" value="b" id="q9b">
              <div class="option-label">B) 42</div>
            </div>
            <div class="option" onclick="selectOption('q9', 'c')">
              <input type="radio" name="q9" value="c" id="q9c">
              <div class="option-label">C) 44</div>
            </div>
            <div class="option" onclick="selectOption('q9', 'd')">
              <input type="radio" name="q9" value="d" id="q9d">
              <div class="option-label">D) 46</div>
            </div>
          </div>
        </div>
        
        <div class="question-container" id="q10">
          <div class="question-number">10</div>
          <div class="question-text">A rectangle has a length of 10 cm and width of 6 cm. What is its area?</div>
          <div class="options-container">
            <div class="option" onclick="selectOption('q10', 'a')">
              <input type="radio" name="q10" value="a" id="q10a">
              <div class="option-label">A) 16 cm²</div>
            </div>
            <div class="option" onclick="selectOption('q10', 'b')">
              <input type="radio" name="q10" value="b" id="q10b">
              <div class="option-label">B) 32 cm²</div>
            </div>
            <div class="option" onclick="selectOption('q10', 'c')">
              <input type="radio" name="q10" value="c" id="q10c">
              <div class="option-label">C) 60 cm²</div>
            </div>
            <div class="option" onclick="selectOption('q10', 'd')">
              <input type="radio" name="q10" value="d" id="q10d">
              <div class="option-label">D) 80 cm²</div>
            </div>
          </div>
        </div>
        
        <div class="submit-section">
          <button type="button" class="btn" onclick="submitTest()">
            <i class="fas fa-paper-plane"></i> Submit Test
          </button>
          <button type="button" class="btn" onclick="resetTest()" style="background: linear-gradient(to right, #777, #555);">
            <i class="fas fa-redo"></i> Reset
          </button>
        </div>
      </div>
    </div>
    
    <footer>
      <p>BUP Admission Test Mock Platform &copy; 2023 | This is a practice test only</p>
    </footer>
  </div>

  <!-- Result Overlay -->
  <div class="result-overlay" id="resultOverlay">
    <div class="result-card">
      <h2>Test Results</h2>
      <div class="score-display" id="finalScore">0.0</div>
      <p id="resultMessage">Your test has been evaluated successfully!</p>
      
      <div class="result-details">
        <div class="result-item">
          <div class="result-label">Correct Answers</div>
          <div class="result-value" id="correctCount">0</div>
        </div>
        <div class="result-item">
          <div class="result-label">Wrong Answers</div>
          <div class="result-value" id="wrongCount">0</div>
        </div>
        <div class="result-item">
          <div class="result-label">Unattempted</div>
          <div class="result-value" id="unattemptedCount">0</div>
        </div>
        <div class="result-item">
          <div class="result-label">Percentage</div>
          <div class="result-value" id="percentage">0%</div>
        </div>
      </div>
      
      <div style="margin-top: 20px; text-align: left;">
        <p><strong>Name:</strong> <span id="resultName"></span></p>
        <p><strong>Email:</strong> <span id="resultEmail"></span></p>
        <p><strong>Test ID:</strong> <span id="testId"></span></p>
        <p><strong>Duration:</strong> <span id="testDuration"></span> minutes</p>
      </div>
      
      <button class="close-result" onclick="closeResult()">Close Results</button>
    </div>
  </div>

  <script>
    let startTime;
    let timerInterval;
    let timeLeft = 30 * 60; // 30 minutes in seconds
    const totalQuestions = 10;
    
    // Correct answers for each question
    const correctAnswers = {
      q1: 'a', // Kind
      q2: 'c', // The team is playing well
      q3: 'a', // Accommodate
      q4: 'b', // Dhaka
      q5: 'c', // Bangabandhu Sheikh Mujibur Rahman
      q6: 'b', // 150 km
      q7: 'b', // 50
      q8: 'c', // 5
      q9: 'b', // 42
      q10: 'c' // 60 cm²
    };
    
    function validateAndStartTest() {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      
      let valid = true;
      
      // Reset error messages
      document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
      
      // Validate name
      if (name === '') {
        document.getElementById('nameError').style.display = 'block';
        valid = false;
      }
      
      // Validate email
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        document.getElementById('emailError').style.display = 'block';
        valid = false;
      }
      
      // Validate phone
      const phoneRegex = /^[0-9+\-\s]{10,15}$/;
      if (!phoneRegex.test(phone)) {
        document.getElementById('phoneError').style.display = 'block';
        valid = false;
      }
      
      if (valid) {
        startTest();
      }
    }
    
    function startTest() {
      startTime = new Date().toISOString();
      
      // Hide form and show quiz
      document.getElementById('testForm').style.display = 'none';
      document.getElementById('quiz').style.display = 'block';
      
      // Start the timer
      startTimer();
      
      // Update progress bar
      updateProgressBar();
    }
    
    function startTimer() {
      timerInterval = setInterval(() => {
        timeLeft--;
        
        // Update timer display
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('time').textContent = 
          `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        // Change color when less than 5 minutes left
        if (timeLeft < 5 * 60) {
          document.querySelector('.timer').style.backgroundColor = '#ff4500';
        }
        
        // Auto-submit when time is up
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          submitTest();
        }
      }, 1000);
    }
    
    function selectOption(questionId, option) {
      // Unselect all options for this question
      const options = document.querySelectorAll(`input[name=${questionId}]`);
      options.forEach(opt => {
        opt.checked = false;
        opt.parentElement.classList.remove('selected');
      });
      
      // Select the clicked option
      const selectedOption = document.getElementById(`${questionId}${option}`);
      selectedOption.checked = true;
      selectedOption.parentElement.classList.add('selected');
      
      // Update progress bar
      updateProgressBar();
    }
    
    function updateProgressBar() {
      let answered = 0;
      for (let i = 1; i <= totalQuestions; i++) {
        const selected = document.querySelector(`input[name=q${i}]:checked`);
        if (selected) answered++;
      }
      
      const progressPercentage = (answered / totalQuestions) * 100;
      document.getElementById('progressBar').style.width = `${progressPercentage}%`;
    }
    
    function submitTest() {
      clearInterval(timerInterval);
      
      const endTime = new Date().toISOString();
      
      let correct = 0;
      let wrong = 0;
      let unattempted = 0;
      
      // Check each question
      for (let i = 1; i <= totalQuestions; i++) {
        const questionId = `q${i}`;
        const selected = document.querySelector(`input[name=${questionId}]:checked`);
        
        if (!selected) {
          unattempted++;
        } else if (selected.value === correctAnswers[questionId]) {
          correct++;
        } else {
          wrong++;
        }
      }
      
      // Calculate marks (1 for correct, -0.5 for wrong)
      const totalMarks = correct - (wrong * 0.5);
      const percentage = ((totalMarks / totalQuestions) * 100).toFixed(2);
      
      // Generate test ID
      const testId = "BUP-" + Date.now().toString().substr(-6);
      
      // Calculate time taken
      const start = new Date(startTime);
      const end = new Date(endTime);
      const durationMinutes = Math.round((end - start) / 1000 / 60);
      
      // Show results
      document.getElementById('finalScore').textContent = totalMarks.toFixed(1);
      document.getElementById('correctCount').textContent = correct;
      document.getElementById('wrongCount').textContent = wrong;
      document.getElementById('unattemptedCount').textContent = unattempted;
      document.getElementById('percentage').textContent = percentage + '%';
      document.getElementById('resultName').textContent = document.getElementById('name').value;
      document.getElementById('resultEmail').textContent = document.getElementById('email').value;
      document.getElementById('testId').textContent = testId;
      document.getElementById('testDuration').textContent = durationMinutes;
      
      // Set result message based on score
      let message = "";
      if (totalMarks >= 8) {
        message = "Excellent! You have a great chance of getting admission.";
      } else if (totalMarks >= 6) {
        message = "Good job! You have a decent chance of getting admission.";
      } else if (totalMarks >= 4) {
        message = "Fair performance. Consider practicing more.";
      } else {
        message = "You need more preparation. Keep practicing!";
      }
      document.getElementById('resultMessage').textContent = message;
      
      // Show result overlay
      document.getElementById('resultOverlay').style.display = 'flex';
      
      // Prepare data for Google Sheets
      const data = {
        testId: testId,
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        phone: document.getElementById("phone").value,
        startTime: startTime,
        endTime: endTime,
        duration: durationMinutes.toString(),
        correct: correct,
        wrong: wrong,
        unattempted: unattempted,
        totalMarks: totalMarks.toFixed(2),
        percentage: percentage
      };
      
      // Send data to Google Sheets
      sendToGoogleSheets(data);
    }
    
    function sendToGoogleSheets(data) {
      // Using the provided Google Apps Script URL
      const url = "https://script.google.com/macros/s/AKfycbyoYPdDK8clXKIJrKSuQSG6mERPP20LPfz-9YBnyWWyG8XkLjAhGzrKEKi62FvFyXoDbw/exec";
      
      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "text/plain" },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(d => console.log("Data sent to Google Sheets successfully"))
      .catch(err => console.error("Failed to send data:", err));
    }
    
    function closeResult() {
      document.getElementById('resultOverlay').style.display = 'none';
    }
    
    function resetTest() {
      if (confirm("Are you sure you want to reset the test? All your answers will be lost.")) {
        // Clear all selections
        for (let i = 1; i <= totalQuestions; i++) {
          const options = document.querySelectorAll(`input[name=q${i}]`);
          options.forEach(opt => {
            opt.checked = false;
            opt.parentElement.classList.remove('selected');
          });
        }
        
        // Reset timer
        clearInterval(timerInterval);
        timeLeft = 30 * 60;
        document.getElementById('time').textContent = "30:00";
        document.querySelector('.timer').style.backgroundColor = '#ff8c00';
        
        // Reset progress bar
        document.getElementById('progressBar').style.width = '0%';
        
        // Show form again
        document.getElementById('testForm').style.display = 'block';
        document.getElementById('quiz').style.display = 'none';
      }
    }
  </script>
</body>
</html>
