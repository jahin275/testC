<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mock Test</title>
</head>
<body>

<h2>Mock Test</h2>

<form id="testForm">
  <label>Name:</label>
  <input type="text" id="name" required><br><br>

  <label>Email:</label>
  <input type="email" id="email" required><br><br>

  <label>Phone:</label>
  <input type="text" id="phone" required><br><br>

  <button type="button" onclick="startTest()">Start Test</button>
</form>

<div id="quiz" style="display:none;">
  <h3>Questions</h3>
  
  <p>1. 2 + 2 = ?</p>
  <input type="radio" name="q1" value="4">4
  <input type="radio" name="q1" value="5">5

  <br><br>

  <p>2. Capital of India?</p>
  <input type="radio" name="q2" value="Delhi">Delhi
  <input type="radio" name="q2" value="Mumbai">Mumbai

  <br><br>

  <button onclick="submitTest()">Submit</button>
</div>

<script>
let startTime;

function startTest() {
  startTime = new Date().toISOString();

  document.getElementById("testForm").style.display = "none";
  document.getElementById("quiz").style.display = "block";
}

function submitTest() {
  const endTime = new Date().toISOString();

  let correct = 0;
  let wrong = 0;
  let unattempted = 0;

  function check(qName, correctAnswer) {
    const selected = document.querySelector(`input[name=${qName}]:checked`);
    if (!selected) { unattempted++; return; }
    if (selected.value === correctAnswer) correct++;
    else wrong++;
  }

  check("q1", "4");
  check("q2", "Delhi");

  const totalMarks = correct - (wrong * 0.5);
  const percentage = (correct / 2) * 100;

  const data = {
    testId: "TEST-" + Math.floor(Math.random() * 100000),
    name: document.getElementById("name").value,
    email: document.getElementById("email").value,
    phone: document.getElementById("phone").value,
    startTime,
    endTime,
    duration: "1",
    correct,
    wrong,
    unattempted,
    totalMarks,
    percentage
  };

  fetch("YOUR_SCRIPT_URL_HERE", {
    method: "POST",
    headers: { "Content-Type": "text/plain" },  // IMPORTANT FIX
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(d => alert("Submitted!"))
  .catch(err => alert("Failed: " + err));
}
</script>

</body>
</html>
